image:
  file: .gitpod.Dockerfile

tasks:
  - command: sudo usermod --password $(openssl passwd -1 $RSTUDIO_PASSWORD) gitpod
  - command: sudo groupadd rstudio-users
  - command: sudo usermod -a -G rstudio-users gitpod
  - command: sudo passwd gitpod
  - command: sudo touch /etc/rstudio/rserver.conf
  - command: sudo bash -c "echo auth-required-user-group=rstudio-users > /etc/rstudio/rserver.conf"
  - command: sudo touch /home/gitpod/.Rprofile
  - command: sudo bash -c "echo setwd('/workspace/captain-scarlet') > /home/gitpod/.Rprofile"
  - command: sudo rstudio-server start

ports:
  - port: 8000
    onOpen: ignore
  - port: 8787
    onOpen: open-browser
  
vscode:
  extensions:
    - eamodio.gitlens
    - streetsidesoftware.code-spell-checker
    - ms-python.python
    - Ikuyadeu.r
